### 前后端登录、登录设计

* ##### 前后端分离

* ##### 同源策略

* ##### 登录设计



> 前后端分离

在JSP的这些时代，个人觉得对于用户信息的一些展示和存取比较方便。但慢慢的项目越来越大，页面越来越多，后端与前端的分离变得越来越困难。且服务器资源是有限的，所以这是前后端集合一个特别不方便之处。

随着技术与业务场景的发展，前后端分离开始分明了起来，那么相较于以往的一个混合模式，前后端分离有一下优点：

* ##### 前后端分离明确，开发效率极大的提升

* ##### 更新迭代更为友好

* ##### 在基于MVC的模式下，程序分层明确，易于维护

但伴随着前后端的分离，以往一些请求在同样的状态，会出现跨域的问题。那么在事实上，跨域问题的出现实际就是同源策略的问题。

> 同源策略

##### 一个源的定义

如果两个页面的协议，端口（如果有指定）和域名都相同，则两个页面具有相同的**源**。

举个例子：

下表给出了相对http://a.xyz.com/dir/page.html同源检测的示例: 

| URL                                       | 结果 | 原因                     |
| ----------------------------------------- | ---- | ------------------------ |
| `http://a.xyz.com/dir2/other.html`        | 成功 |                          |
| `http://a.xyz.com/dir/inner/another.html` | 成功 |                          |
| `https://a.xyz.com/secure.html`           | 失败 | 不同协议 ( https和http ) |
| `http://a.xyz.com:81/dir/etc.html`        | 失败 | 不同端口 ( 81和80)       |
| `http://a.opq.com/dir/other.html`         | 失败 | 不同域名 ( xyz和opq)     |

##### 同源策略是什么

同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源。所以xyz.com下的js脚本采用ajax读取abc.com里面的文件数据是会被拒绝的。

同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。

那么对于这种同源的问题，目前有一下这几种方案解决

* ##### jsonp

* ##### cors

* ##### nginx

JSONP跨域

只支持GET请求，不支持POST等其它请求，也不支持复杂请求，只支持简单请求。

CORS跨域

支持所有的请求，包含GET、POST、OPTOIN、PUT、DELETE等。既支持复杂请求，也支持简单请求。

nginx这种方案是通过代理去解决了整个跨域的问题。

但对于目前来说，更多都是通过cors这种方案，开放端口的白名单进行一个跨域请求的解决方案。

[此处暂时有误，得继续搭建好代码与官网资料确认]

> 登录系统的设计

* 传统

  * ##### 用户名密码

  * ##### 手机验证码

* ##### 单点登录

  * #### SSO

    * ##### CAS

    * ##### Oauth2.0

    * ##### saml

在上述中，传统登录的方式还是保留并集成到了单点登录。单点登录在微服务的设计体系中，属于单独的服务验证，验证成功后通过颁发token令牌，并下发。使得用户能一次登录，便可使用多个系统。